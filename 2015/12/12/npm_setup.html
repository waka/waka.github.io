<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" /><meta content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" name="viewport" /><title>最近のnpmライブラリ書くときのpackage.json - yo_waka&#39;s blog</title><link href="/feed.xml" rel="alternate" title="Atom Feed" type="application/atom+xml" /><link href="/assets/images/favicon.ico" rel="icon" type="image/vnd.microsoft.icon" /><link href="/assets/stylesheets/normalize.css" rel="stylesheet" type="text/css" /><link href="/assets/stylesheets/syntax_highlight.css" rel="stylesheet" type="text/css" /><link href="/assets/stylesheets/main.css?1485024912" rel="stylesheet" type="text/css" /></head><body><div class="layout"><header class="header"><h1><a href="/index.html">yo_waka&#39;s blog</a></h1></header><div class="main"><div class="container"><div class="content"><div class="post-date">2015-12-12</div><article class="post"><h1>最近のnpmライブラリ書くときのpackage.json</h1>

<p><a href="http://qiita.com/advent-calendar/2015/nodejs">Node.js Advent Calendar 2015</a> 12日目の記事です</p>

<p>最近はES2015で書き出すのが普通になってきたので、初期構成がだいたい似たような感じになってる。</p>
<div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;NAME&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;description&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;DESCRIPTION&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;version&quot;</span><span class="o">:</span> <span class="s2">&quot;0.1.0&quot;</span><span class="p">,</span>
  <span class="s2">&quot;repository&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;git&quot;</span><span class="p">,</span>
    <span class="s2">&quot;url&quot;</span><span class="o">:</span> <span class="s2">&quot;&lt;GITHUB URL&quot;</span><span class="o">&gt;</span>
  <span class="p">},</span>
  <span class="s2">&quot;main&quot;</span><span class="o">:</span> <span class="s2">&quot;./lib/index.js&quot;</span><span class="p">,</span>
  <span class="s2">&quot;files: [&quot;</span><span class="nx">lib</span><span class="s2">&quot;],</span>
<span class="s2">  &quot;</span><span class="nx">directories</span><span class="s2">&quot;: {</span>
<span class="s2">    &quot;</span><span class="nx">test</span><span class="s2">&quot;: &quot;</span><span class="nx">test</span><span class="s2">&quot;</span>
<span class="s2">  },</span>
<span class="s2">  &quot;</span><span class="nx">devDependencies</span><span class="s2">&quot;: {</span>
<span class="s2">    &quot;</span><span class="nx">babel</span><span class="o">-</span><span class="nx">core</span><span class="s2">&quot;: &quot;</span><span class="o">*</span><span class="s2">&quot;,</span>
<span class="s2">    &quot;</span><span class="nx">babel</span><span class="o">-</span><span class="nx">plugin</span><span class="o">-</span><span class="nx">transform</span><span class="o">-</span><span class="nx">es2015</span><span class="o">-</span><span class="nx">modules</span><span class="o">-</span><span class="nx">commonjs</span><span class="s2">&quot;: &quot;</span><span class="o">*</span><span class="s2">&quot;,</span>
<span class="s2">    &quot;</span><span class="nx">babel</span><span class="o">-</span><span class="nx">preset</span><span class="o">-</span><span class="nx">es2015</span><span class="s2">&quot;: &quot;</span><span class="o">*</span><span class="s2">&quot;,</span>
<span class="s2">    &quot;</span><span class="nx">mocha</span><span class="s2">&quot;: &quot;</span><span class="o">*</span><span class="s2">&quot;,</span>
<span class="s2">    &quot;</span><span class="nx">power</span><span class="o">-</span><span class="nx">assert</span><span class="s2">&quot;: &quot;</span><span class="o">*</span><span class="err">&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
<p>srcにES2015で書いて、Babelでlib下に吐き出す。<br>
filesにlibだけを書いておけば成果物のサイズが小さくなるのでおすすめ。</p>

<p>.gitignoreにはlibを指定しておき、npmで公開するもの（ES5）とgithubで公開するもの（ES2015）は分ける。</p>

<p>また、テストはmochaの場合、最近はbabel-coreがあればES2015でテストを書くことが可能になっている。</p>
<div class="highlight"><pre><span class="s">&quot;script&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s">&quot;test&quot;</span><span class="o">:</span> <span class="s">&quot;mocha --require babel-core/register --recursive&quot;</span>
<span class="p">}</span>
</pre></div></article></div></div><div class="profile"><div class="account"><a href="https://twitter.com/yo_waka" target="_blank"><img height="48" src="/assets/images/waka.png" width="48" /></a></div><div class="intro"><a href="https://twitter.com/yo_waka" target="_blank">@yo_waka</a><p>Software Engineer. Joined at freee K.K. since 2013. I like Ruby and JavaScript, but I really like Java.</p></div></div><footer class="footer"><p class="copyright">Copyright &copy; 2013 by <a href="https://twitter.com/yo_waka" target="_blank">@yo_waka</a></p></footer></div></div></body></html>